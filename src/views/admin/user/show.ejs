<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content=" Dự án laptopshop" />
    <meta name="author" content="Hỏi Dân IT" />
    <title>USER-LAPTOPSHOP</title>
    <!-- style css -->
    <link href="/admin/css/styles.css" rel="stylesheet" />
    <!-- fontawesome -->
    <script
      src="https://use.fontawesome.com/releases/v6.3.0/js/all.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body class="sb-nav-fixed">
    <!-- header -->
    <%- include('../layout/header'); -%>
    <div id="layoutSidenav">
      <!-- navbar -->
      <%- include('../layout/navbar'); -%>
      <!-- content -->
      <div id="layoutSidenav_content">
        <main>
          <div class="container-fluid px-4">
            <h3 class="mt-4">Manager User</h3>
            <ol class="breadcrumb mb-4">
              <li class="breadcrumb-item">
                <a href="/admin/dashboard">dashboard</a>
              </li>
              <li class="breadcrumb-item active">Users</li>
            </ol>
            <div class="d-flex justify-content-between mb-4">
              <a href="/admin/user/create-user" class="btn btn-primary"
                ><i class="fa-solid fa-user-plus"></i> Thêm người dùng</a
              >
            </div>
            <hr />
            <!-- TABLE -->
            <table
              class="table table-bordered text-center w-75 m-auto text-white"
            >
              <thead style="background-color: #233044">
                <tr>
                  <th>id</th>
                  <th>Ảnh</th>
                  <th>Họ Tên</th>
                  <th>Email</th>
                  <th>Địa chỉ</th>
                  <th>Điện Thoại</th>
                  <th>Quyền</th>
                  <th>Hành động</th>
                </tr>
              </thead>
              <tbody>
                <% users.forEach( function (user) { %>
                <tr>
                  <td class="p-4"><%= user.id %></td>
                  <td>
                    <img
                      src="/images/user/<%= user.avatar %>"
                      class="img-fluid"
                      style="width: 80px; height: 80px"
                      alt=""
                    />
                  </td>
                  <td class="p-4"><%= user.fullName %></td>
                  <td class="p-4"><%= user.username %></td>
                  <td class="p-4"><%= user.address %></td>
                  <td class="p-4"><%= user.phone %></td>
                  <td class="p-4"><%= user.roleId %></td>
                  <td>
                    <div class="d-flex justify-content-center text-center p-4">
                      <form
                        action="/admin/user/handle-delete-user/<%= user.id %>"
                        method="post"
                      >
                        <button type="submit" class="btn btn-warning me-3">
                          <i class="fa-solid fa-trash"></i>
                        </button>
                      </form>
                      <form
                        action="/admin/user/view-user/<%= user.id %>"
                        method="post"
                      >
                        <button type="submit" class="btn btn-danger">
                          <i class="fa-regular fa-eye"></i>
                        </button>
                      </form>
                    </div>
                  </td>
                </tr>
                <% }) %>
              </tbody>
            </table>
            <nav aria-label="Page navigation example" class="mt-3">
              <ul class="pagination justify-content-center">
                <li class="page-item">
                  <a
                    class="<%=currentPage==1 ? 'disabled page-link' : 'page-link' %>"
                    href="/admin/user?page=<%=currentPage-1%>"
                    >Previous</a
                  >
                </li>
                <% for( var i=1; i<=totalPageUsers ;i++) {%>
                <li class="page-item">
                  <a
                    class="<%=currentPage == i ?'active page-link' :'page-link' %>"
                    href="/admin/user?page=<%=i%>"
                  >
                    <%=i%>
                  </a>
                </li>
                <%}%>
                <li class="page-item">
                  <a
                    class="<%=currentPage==totalPageUsers ?'disabled page-link' : 'page-link' %>"
                    href="/admin/user?page=<%=currentPage+1%>"
                    >Next</a
                  >
                </li>
              </ul>
            </nav>
          </div>
        </main>
        <!-- footer -->
        <%- include('../layout/footer'); -%>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="/admin/js/scripts.js"></script>
  </body>
</html>
